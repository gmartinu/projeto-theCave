// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Agendamento {
  id        Int      @id @default(autoincrement())
  date      DateTime
  concluido Boolean?

  cliente       Pessoa?     @relation("cliente", fields: [clienteId], references: [id])
  funcionario   Pessoa?     @relation("funcionario", fields: [funcionarioId], references: [id])
  servico       Servicos?   @relation(fields: [servicosId], references: [id])
  pagamento     Pagamentos? @relation(fields: [pagamentosId], references: [id])
  servicosId    Int?
  pagamentosId  Int?
  clienteId     Int?
  funcionarioId Int?
}

model Pagamentos {
  id          Int           @id @default(autoincrement())
  valor_pago  Decimal
  Agendamento Agendamento[]
}

model Servicos {
  id          Int           @id @default(autoincrement())
  descricao   String
  valor       Decimal
  Agendamento Agendamento[]
}

model Pessoa {
  id                Int      @id @default(autoincrement())
  createdAt         DateTime @default(now())
  nome              String
  cpf               String
  data_nascimento   DateTime
  sexo              Int
  funcionario       Boolean  @default(false)
  funcionario_ativo Boolean  @default(false)
  cliente           Boolean  @default(false)
  cliente_ativo     Boolean  @default(false)
  gerente           Boolean  @default(false)
  gerente_ativo     Boolean  @default(false)

  usuario                 User[]
  endereco                Endereco[]
  Agendamento_funcionario Agendamento[] @relation("funcionario")
  Agendamento_cliente     Agendamento[] @relation("cliente")
}

model Endereco {
  id          Int     @id @default(autoincrement())
  endereco    String
  cep         String
  numero      String
  complemento String
  uf          String
  estado      String
  bairro      String
  cidade      String
  ibge        String
  Pessoa      Pessoa? @relation(fields: [pessoaId], references: [id])
  pessoaId    Int?
}

model User {
  id       Int     @id @default(autoincrement())
  usuario  String  @unique
  email    String?
  senha    String
  Pessoa   Pessoa? @relation(fields: [pessoaId], references: [id])
  pessoaId Int?
}
